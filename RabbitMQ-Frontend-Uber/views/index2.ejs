<!DOCTYPE html>
<html>
  <head>
    <title>Driver</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <script src="https://cdn.socket.io/socket.io-1.3.7.js"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
  	
    
   
	<script>
<<<<<<< HEAD
	  var socket = io.connect('http://localhost:3005');
=======
	  var socket = io.connect('http://localhost:3000');
>>>>>>> 7135bb1ab294e9a50df0d3f22bf0f8213220d042
	  var ssn = 'Awaise';
	  socket.on('Driver', function (data) {
	    console.log(data);
	    console.log(data.request.toString());
	    if(data.ssn.toString() === ssn && data.request.toString() === 'Start Ride'){
	     	$("#dialog-message").removeClass("hidden");
	    	$(function() {
				    $( "#dialog-message" ).dialog({
				      modal: true,
				      buttons: {
				        Ok: function() {
				          $( this ).dialog( "close" );
				          socket.emit('Server', { ssn : ssn, request: 'Ride Accepted' });
				          $("#endBtn").removeClass("hidden");
				        }
				      }
				    });
			});
	    }
	  });
	  
	  function endRide(){
	  		socket.emit('Server', { ssn : ssn, request: 'Ride Ended' });
	  		$("#endBtn").addClass("hidden");
	  		$("#afterLogin").removeClass("hidden");
	  }
	  	
	 
	</script>
	<style>
		.hidden{
			visibility : hidden !important;
		}
	</style>
	
	
  </head>
  <body>
  
  	<div id="dialog-message" class="hidden" title="Ride Request">
		  <p>
		    <span class="ui-icon ui-icon-circle-check" style="float:left; margin:0 7px 50px 0;"></span>
		    	Incoming Ride Request!
		  </p>
	</div>
  	
  	
  	
    <h1>Waiting for incoming ride requests</h1>
    
    <div id="afterLogin" class="hidden">Ride has ended. Redirecting to submit feedback...</div>
    
    <button id="endBtn" class="hidden" onclick="endRide();">End Ride</button> 
  </body>
</html>
